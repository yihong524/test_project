<!DOCTYPE html><html lang="en"><head>    <meta charset="UTF-8">    <meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">    <link rel="stylesheet" href="../css/bootstrap.min.css">    <style>        pre {            outline: 1px solid #ccc;            padding: 5px;            margin: 5px;        }        .string {            color: green;        }        .number {            color: darkorange;        }        .boolean {            color: blue;        }        .null {            color: magenta;        }        .key {            color: red;        }    </style>    <title>title</title></head><body><div class="jumbotron jumbotron-fluid">    <div class="container">        <h1 class="display-4">API 下单测试</h1>        <p class="lead">订单中心下单接口测试页面</p>        <div class="input-group mb-3">            <div class="input-group-prepend">                <span class="input-group-text" id="basic-addon3">接口地址</span>            </div>            <input type="text" class="form-control" id="url"                   value="https://qa-test.orientpay.com/order-center/pay/placeOrdersApi">        </div>        <div class="row mb-3">            <div class="col-sm-6 input-group">                <div class="input-group-prepend">                    <span class="input-group-text">渠道代码</span>                </div>                <input type="text" class="form-control" id="channelCode" value="000001">            </div>            <div class="col-sm-6 input-group">                <div class="input-group-prepend">                    <span class="input-group-text">渠道秘钥</span>                </div>                <input type="text" class="form-control" id="channelKey" value="app1234567890">            </div>        </div>        <div class="row justify-content-between">            <form class="col-sm-6 border border-info" id="form1" method="post">                <div class="mt-3 form-group row">                    <label class="col-sm-4 col-form-label">version</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="version">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">reqSerNum</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="reqSerNum">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">reqTime</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="reqTime">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">channelCode</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="channelCode" readonly>                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">supplyOrgCode</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="supplyOrgCode">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">transCode</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="transCode">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">businessCode</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="businessCode">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">userId</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="userId">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">channelUserId</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="channelUserId">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">channelOrderReqNo</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="channelOrderReqNo">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">channelOrderNo</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="channelOrderNo">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">channelOrderReqTime</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="channelOrderReqTime">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">connChannel</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="connChannel">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">orderAmt</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="orderAmt">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">payAmt</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="payAmt">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">discountAmt</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="discountAmt">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">discountType</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="discountType">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">couponNo</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="couponNo">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">bgNoticeUrl</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="bgNoticeUrl">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">bizParams</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="bizParams">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">goodsType</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="goodsType">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">goodsName</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="goodsName">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">attach</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="attach">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">param1</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="param1">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">param2</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="param2">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">param3</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="param3">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">param4</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="param4">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">param5</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="param5">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">sign</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="sign" placeholder="自动生成，无需填写" readonly>                    </div>                </div>            </form>            <form class="col-sm-5 border border-info" id="form2">                <h4 class="col bg-success d-flex justify-content-center">bizParams:</h4>                <div class="mt-3 form-group row">                    <label class="col-sm-4 col-form-label">prodInstId</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="prodInstId">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">offerId</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="offerId">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">cardNo</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="cardNo">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">cardPwd</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="cardPwd">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">amount</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="amount">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">balanceAmount</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="balanceAmount">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">channel_id</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="channel_id">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">Period</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="Period">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">pay_date</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="pay_date">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">center_bill_id</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="center_bill_id">                    </div>                </div>                <div class="form-group row">                    <label class="col-sm-4 col-form-label">payed_method</label>                    <div class="col-sm-8">                        <input type="text" class="form-control" name="payed_method">                    </div>                </div>            </form>        </div>        <button type="submit" class="btn btn-lg btn-primary my-4 col-sm-4 mr-4" id="submitReq">提交</button>        <button type="submit" class="btn btn-lg btn-danger my-4 col-sm-2" id="refresh">重置表单数据</button>        <div class="alert alert-primary" role="alert">            <h5>请求数据：</h5>            <pre id="request"></pre>        </div>        <div class="alert alert-success" role="alert">            <h5>返回数据：</h5>            <pre id="response"></pre>        </div>    </div></div><!--jQuery first, then Popper.js, then Bootstrap JS--><!--<script src="https://ajax.aspnetcdn.com/ajax/jQuery/jquery-3.3.1.js"></script>--><script src="../js/jquery-3.3.1.min.js"></script><script src="../js/popper.min.js"></script><script src="../js/bootstrap.min.js"></script><script src="../js/jquery.md5.js"></script><script>    function syntaxHighlight(json) {        if (typeof json != 'string') {            json = JSON.stringify(json, undefined, 2);        }        json = json.replace(/&/g, '&amp;').replace(/</g, '&lt;').replace(/>/g, '&gt;');        return json.replace(/("(\\u[a-zA-Z0-9]{4}|\\[^u]|[^\\"])*"(\s*:)?|\b(true|false|null)\b|-?\d+(?:\.\d*)?(?:[eE][+\-]?\d+)?)/g, function (match) {            var cls = 'number';            if (/^"/.test(match)) {                if (/:$/.test(match)) {                    cls = 'key';                } else {                    cls = 'string';                }            } else if (/true|false/.test(match)) {                cls = 'boolean';            } else if (/null/.test(match)) {                cls = 'null';            }            return '<span class="' + cls + '">' + match + '</span>';        });    }</script><script>    function objectifyForm(formArray) {//serialize data function        var returnArray = {};        for (var i = 0; i < formArray.length; i++) {            if (formArray[i]['value'] && (formArray[i]['name'] != "sign")) {  //只保留非空字段                returnArray[formArray[i]['name']] = formArray[i]['value'];            }        }        return returnArray;    }    function sortedData(data) {        var ordered = [];        Object.keys(data).sort().forEach(function (key) {            ordered.push(key + "=" + data[key]);        });        return ordered;    }    function serializeJSON() {        if ($("[name='businessCode']").val() == "PZ") {            var bizParams = objectifyForm($("#form2").serializeArray());            $("[name='bizParams']").val(JSON.stringify(bizParams));        }        ;        var data = objectifyForm($("#form1").serializeArray());        var ordedString = sortedData(data);        ordedString.push("key=" + $("#channelKey").val());        var signString = ordedString.join("&");        //加签        data["sign"] = $.md5(signString);        // alert(JSON.stringify(data));        return data;    }    function getTimeStamp() {        return new Date().getTime();    }    function pad2(n) {        return n < 10 ? '0' + n : n    }    function getFormatDate() {        var date = new Date();        return date.getFullYear().toString() + pad2(date.getMonth() + 1) + pad2(date.getDate()) + pad2(date.getHours()) + pad2(date.getMinutes()) + pad2(date.getSeconds());    }    function refreshForm() {            $("[name='version']").val("V1.0");            $("[name='reqSerNum']").val(getTimeStamp());            $("[name='reqTime']").val(getFormatDate());            $("[name='channelCode']").val($("#channelCode").val());            $("[name='supplyOrgCode']").val("");            $("[name='transCode']").val("100001");            $("[name='businessCode']").val("PZ");            $("[name='userId']").val("");            $("[name='channelUserId']").val("");            $("[name='channelOrderReqNo']").val(getTimeStamp());            $("[name='channelOrderNo']").val(getFormatDate() + "0001");            $("[name='channelOrderReqTime']").val(getFormatDate());            $("[name='connChannel']").val("WX");            $("[name='orderAmt']").val("1");            $("[name='payAmt']").val("1");            $("[name='discountAmt']").val("0");            $("[name='discountType']").val("0");            $("[name='couponNo']").val("");            $("[name='bgNoticeUrl']").val("http://www.baidu.com");            $("[name='bizParams']").val("");            $("[name='goodsType']").val("电脑");            $("[name='goodsName']").val("MacBook PRO 2017");            //bizParams default settings as below:            $("[name='prodInstId']").val("123456789");            $("[name='offerId']").val("ID123456");            $("[name='cardNo']").val("CardNo8888888888888888");            $("[name='cardPwd']").val("CardPWD999999");            $("[name='amount']").val("100");            $("[name='balanceAmount']").val("200");            $("[name='channel_id']").val("channel_id_123456");            $("[name='Period']").val("201804");            $("[name='pay_date']").val("20180409");            $("[name='center_bill_id']").val("bill_id_2018040901123445334");            $("[name='payed_method']").val("0");        }</script><script>    $(document).ready(function () {        $(refreshForm());        $("button#submitReq").click(function () {            // $.ajax({            //     type: "POST",            //     url: "https://qa-test.orientpay.com/sit2/order-center/pay/placeOrdersApi",            //     data: serializeJSON(),            //     headers : {'content-type': 'application/json'},            //     dataType: "json",            //     success: function (resp) {            //         alert(resp.data);            //     }            // })            $.post($("#url").val(), serializeJSON(), function (data) {                $("#request").html(syntaxHighlight(JSON.stringify(serializeJSON(), null, 2)));                $("#response").html(syntaxHighlight(JSON.stringify(JSON.parse(data), null, 2)));            });        });        $("#channelCode").change(function () {            $("[name='channelCode']").val($("#channelCode").val());        });        $("#refresh").click(function () {            // window.location.reload();            refreshForm();        })    })</script></body></html>